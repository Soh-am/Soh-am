import{f,r as c,j as e,B as u,C as p,a as b,b as v,d as g,U as O,S as P}from"./index-CrTXna4A.js";import{I as R}from"./input-r8v52-1R.js";import{S as h}from"./switch-DD_lgYYp.js";import{A as J,B as z}from"./index-BN0efjUF.js";import{S as q}from"./search-L_fcFbc_.js";import{H as D}from"./heart-BKS1KKhr.js";import{E as G}from"./eye-CN4AWhoU.js";import{N as Q}from"./navigation-eUus_OWd.js";import"./index-DsU3O61P.js";import"./index-Ch7-usI-.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],V=f("eye-off",K);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Y=f("layers",X);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M5 12h14",key:"1ays0h"}]],se=f("minus",ee);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ae=f("plus",te);function ge({onBack:w,isDarkMode:o=!1,userRole:le="tourist"}){const[j,A]=c.useState(""),[n,U]=c.useState({tourists:!0,police:!0,hospitals:!0,geofences:!0,restricted:!0}),[k,S]=c.useState([28.6139,77.209]),[I,y]=c.useState(12),[re,$]=c.useState(null),[_,C]=c.useState(null),i=c.useMemo(()=>[{id:"1",name:"John Doe",lat:28.6129,lng:77.2295,status:"safe",lastUpdate:"2 mins ago",group:"Family Tour"},{id:"2",name:"Sarah Smith",lat:28.6169,lng:77.209,status:"safe",lastUpdate:"5 mins ago",group:"Solo Traveler"},{id:"3",name:"Mike Johnson",lat:28.62,lng:77.21,status:"warning",lastUpdate:"1 min ago",group:"Business Trip"},{id:"4",name:"Lisa Brown",lat:28.618,lng:77.215,status:"danger",lastUpdate:"3 mins ago",group:"Adventure Group"},{id:"5",name:"David Wilson",lat:28.622,lng:77.208,status:"emergency",lastUpdate:"Just now",group:"Emergency"},{id:"6",name:"Emma Davis",lat:28.615,lng:77.212,status:"safe",lastUpdate:"4 mins ago",group:"Family Tour"},{id:"7",name:"James Taylor",lat:28.619,lng:77.207,status:"warning",lastUpdate:"2 mins ago",group:"Solo Traveler"},{id:"8",name:"Sophie Anderson",lat:28.616,lng:77.218,status:"safe",lastUpdate:"6 mins ago",group:"Student Exchange"}],[]),L=[{id:"p1",name:"Central Police Station",type:"police",lat:28.6139,lng:77.209,description:"24/7 Emergency Response"},{id:"p2",name:"Tourist Police Unit",type:"police",lat:28.62,lng:77.215,description:"Specialized Tourist Support"},{id:"h1",name:"All India Institute of Medical Sciences",type:"hospital",lat:28.6169,lng:77.208,description:"Level 1 Trauma Center"},{id:"h2",name:"Safdarjung Hospital",type:"hospital",lat:28.5706,lng:77.2094,description:"Emergency Care Available"},{id:"l1",name:"India Gate",type:"landmark",lat:28.6129,lng:77.2295,description:"Popular Tourist Destination"}],M=[{id:"g1",name:"Safe Tourist Zone",type:"safe",coordinates:[[28.61,77.205],[28.625,77.205],[28.625,77.22],[28.61,77.22]]},{id:"g2",name:"Restricted Area",type:"restricted",coordinates:[[28.618,77.218],[28.622,77.218],[28.622,77.222],[28.618,77.222]]}],N=s=>{switch(s){case"safe":return"#38a169";case"warning":return"#ed8936";case"danger":return"#c53030";case"emergency":return"#c53030";default:return"#1a365d"}},B=s=>{switch(s){case"safe":return"âœ“";case"warning":return"!";case"danger":return"âš ";case"emergency":return"ðŸš¨";default:return"?"}},m=(s,a)=>{const t={minLat:28.55,maxLat:28.65,minLng:77.18,maxLng:77.24},l=800,r=600,d=(a-t.minLng)/(t.maxLng-t.minLng)*l,E=(t.maxLat-s)/(t.maxLat-t.minLat)*r;return{x:Math.max(0,Math.min(l,d)),y:Math.max(0,Math.min(r,E))}},H=c.useMemo(()=>{const s={},a=new Set;return i.forEach(t=>{if(a.has(t.id))return;const l=[t];a.add(t.id),i.forEach(d=>{if(a.has(d.id))return;Math.sqrt(Math.pow(t.lat-d.lat,2)+Math.pow(t.lng-d.lng,2))<.005&&(l.push(d),a.add(d.id))});const r=`${t.lat.toFixed(4)}_${t.lng.toFixed(4)}`;s[r]=l}),s},[i]),T=i.filter(s=>s.name.toLowerCase().includes(j.toLowerCase())||s.group?.toLowerCase().includes(j.toLowerCase())),x=s=>{U(a=>({...a,[s]:!a[s]}))},W=s=>{$(s),S([s.lat,s.lng])},Z=()=>{y(s=>Math.min(s+1,18))},F=()=>{y(s=>Math.max(s-1,1))};return e.jsxs("div",{className:"h-screen w-full flex flex-col bg-background",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-card border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[w&&e.jsxs(u,{variant:"ghost",size:"sm",onClick:w,children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx("h1",{className:"text-xl font-semibold",children:"Interactive Safety Map"}),e.jsxs(z,{variant:"outline",className:"text-xs",children:[T.length," Tourists Tracked"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(R,{placeholder:"Search tourists or groups...",value:j,onChange:s=>A(s.target.value),className:"pl-10 w-64"})]})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-80 bg-card border-r border-border flex flex-col",children:[e.jsxs(p,{className:"m-4 mb-2",children:[e.jsx(b,{className:"pb-3",children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Map Layers"]})}),e.jsxs(g,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{children:"Tourists"})]}),e.jsx(h,{checked:n.tourists,onCheckedChange:()=>x("tourists")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{children:"Police Stations"})]}),e.jsx(h,{checked:n.police,onCheckedChange:()=>x("police")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{children:"Hospitals"})]}),e.jsx(h,{checked:n.hospitals,onCheckedChange:()=>x("hospitals")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{children:"Safe Zones"})]}),e.jsx(h,{checked:n.geofences,onCheckedChange:()=>x("geofences")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{children:"Restricted Areas"})]}),e.jsx(h,{checked:n.restricted,onCheckedChange:()=>x("restricted")})]})]})]}),e.jsxs(p,{className:"m-4 mt-2 mb-2",children:[e.jsx(b,{className:"pb-3",children:e.jsx(v,{children:"Status Legend"})}),e.jsxs(g,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-[#38a169] border-2 border-white"}),e.jsx("span",{className:"text-sm",children:"Safe"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-[#ed8936] border-2 border-white"}),e.jsx("span",{className:"text-sm",children:"Warning"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-[#c53030] border-2 border-white"}),e.jsx("span",{className:"text-sm",children:"Danger"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-[#c53030] border-2 border-white animate-pulse"}),e.jsx("span",{className:"text-sm",children:"Emergency"})]})]})]}),e.jsxs(p,{className:"m-4 mt-2 flex-1 flex flex-col",children:[e.jsx(b,{className:"pb-3",children:e.jsx(v,{children:"Active Tourists"})}),e.jsx(g,{className:"flex-1 overflow-auto space-y-2",children:T.map(s=>e.jsxs("div",{className:"p-3 border border-border rounded-lg cursor-pointer hover:bg-accent transition-colors",onClick:()=>W(s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full border border-white",style:{backgroundColor:N(s.status)}}),e.jsx("span",{className:"font-medium text-sm",children:s.name})]}),e.jsx(z,{variant:"outline",className:"text-xs",children:s.status})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[s.group," â€¢ ",s.lastUpdate]})]},s.id))})]})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"h-full w-full relative overflow-hidden bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-800 dark:to-gray-900",children:e.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 800 600",className:"absolute inset-0",style:{background:o?"#1f2937":"#f8fafc"},children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:o?"#374151":"#e2e8f0",strokeWidth:"1",opacity:"0.3"})})}),e.jsx("rect",{width:"800",height:"600",fill:"url(#grid)"}),n.geofences&&M.filter(s=>s.type==="safe").map(s=>{const a=s.coordinates.map(t=>{const l=m(t[0],t[1]);return`${l.x},${l.y}`}).join(" ");return e.jsx("polygon",{points:a,fill:"#38a169",fillOpacity:"0.1",stroke:"#38a169",strokeWidth:"2",strokeDasharray:"5,5"},s.id)}),n.restricted&&M.filter(s=>s.type==="restricted").map(s=>{const a=s.coordinates.map(t=>{const l=m(t[0],t[1]);return`${l.x},${l.y}`}).join(" ");return e.jsx("polygon",{points:a,fill:"#c53030",fillOpacity:"0.2",stroke:"#c53030",strokeWidth:"2",strokeDasharray:"3,3"},s.id)}),n.police&&L.filter(s=>s.type==="police").map(s=>{const a=m(s.lat,s.lng);return e.jsxs("g",{children:[e.jsx("circle",{cx:a.x,cy:a.y,r:"12",fill:"#1a365d",stroke:"white",strokeWidth:"3"}),e.jsx("text",{x:a.x,y:a.y+4,textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:"ðŸš”"})]},s.id)}),n.hospitals&&L.filter(s=>s.type==="hospital").map(s=>{const a=m(s.lat,s.lng);return e.jsxs("g",{children:[e.jsx("circle",{cx:a.x,cy:a.y,r:"12",fill:"#c53030",stroke:"white",strokeWidth:"3"}),e.jsx("text",{x:a.x,y:a.y+4,textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:"ðŸ¥"})]},s.id)}),n.tourists&&Object.entries(H).map(([s,a])=>{const t=a[0],l=a.length>1,r=m(t.lat,t.lng);return e.jsxs("g",{className:"cursor-pointer",onMouseEnter:()=>C(s),onMouseLeave:()=>C(null),onClick:()=>W(t),children:[e.jsx("circle",{cx:r.x,cy:r.y,r:l?"16":"12",fill:N(t.status),stroke:"white",strokeWidth:"3",className:t.status==="emergency"?"animate-pulse":""}),e.jsx("text",{x:r.x,y:r.y+4,textAnchor:"middle",fill:"white",fontSize:l?"12":"10",fontWeight:"bold",children:l?a.length:B(t.status)}),_===s&&e.jsxs("g",{children:[e.jsx("rect",{x:r.x+20,y:r.y-40,width:"160",height:l?"80":"60",fill:o?"#1f2937":"white",stroke:o?"#374151":"#e2e8f0",strokeWidth:"1",rx:"4"}),e.jsx("text",{x:r.x+25,y:r.y-25,fill:o?"white":"black",fontSize:"12",fontWeight:"bold",children:l?`Cluster (${a.length})`:t.name}),e.jsx("text",{x:r.x+25,y:r.y-10,fill:o?"#9ca3af":"#6b7280",fontSize:"10",children:l?"Multiple tourists":t.group}),e.jsxs("text",{x:r.x+25,y:r.y+5,fill:N(t.status),fontSize:"10",fontWeight:"bold",children:["Status: ",t.status]})]})]},s)})]})}),e.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[e.jsx(u,{size:"sm",variant:"outline",className:"bg-background/90 backdrop-blur-sm",onClick:Z,children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(u,{size:"sm",variant:"outline",className:"bg-background/90 backdrop-blur-sm",onClick:F,children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx(u,{size:"sm",variant:"outline",className:"bg-background/90 backdrop-blur-sm",onClick:()=>{S([28.6139,77.209]),y(12)},children:e.jsx(Q,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10",children:e.jsx(p,{className:"bg-background/90 backdrop-blur-sm",children:e.jsx(g,{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-[#38a169] rounded-full"}),e.jsxs("span",{children:[i.filter(s=>s.status==="safe").length," Safe"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-[#ed8936] rounded-full"}),e.jsxs("span",{children:[i.filter(s=>s.status==="warning").length," Warning"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-[#c53030] rounded-full"}),e.jsxs("span",{children:[i.filter(s=>s.status==="danger").length," Danger"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-[#c53030] rounded-full animate-pulse"}),e.jsxs("span",{children:[i.filter(s=>s.status==="emergency").length," Emergency"]})]})]}),e.jsxs("div",{className:"text-muted-foreground",children:["Zoom: ",I," | Center: ",k[0].toFixed(4),", ",k[1].toFixed(4)]})]})})})})]})]})]})}export{ge as InteractiveMap};
